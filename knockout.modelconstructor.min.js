(function(b,k){"undefined"!==typeof b&&(b.model=function(a,c){function e(a,c){for(var d in a){var f=typeof a[d];if("string"===f||"number"===f||"boolean"===f)c[d]=b.observable(a[d]);else if("object"===f)if("undefined"===typeof a[d].length)c[d]=b.observable(e(a[d],{}));else{c[d]=b.observableArray();for(f=0;f<a[d].length;++f)c[d].push(e(a[d][f],{}))}}return c}return e(a,c||{})},b.bindingHandlers.using={init:function(a,c,e,g,h){c=c();g={outer:g};if("object"!==typeof c||null===c)throw Error("using binding requires valid object");
for(var d in c)if(e=typeof c[d],"outer"!==d&&("function"===e||"object"===e||"string"===e||"number"===e))g[d]=c[d];b.applyBindingsToDescendants(h.createChildContext(g),a);return{controlsDescendantBindings:!0}}},b.virtualElements.allowedBindings.using=!0,b.Controller=function(a){this.updating=b.observable(!1);this.nowfocus=b.observable(!1);this.invoking=b.observable(!1);this.haserror=b.observable(!1);this.errormsg=b.observable(!1);this.keep={};for(var c in a)if("function"===typeof a[c]&&"function"===
typeof a[c].subscribe){var e=a[c]();"string"===typeof e&&(this.keep[c]=e)}!0===b.isObservable(a)?this.item=a():this.item=a},b.Controller.prototype.change=function(a){this.invoking(!1);this.haserror(!1);this.nowfocus(!1);this.updating(!1);this.keep={};for(var c in a)if("function"===typeof a[c]&&"function"===typeof a[c].subscribe){var b=a[c]();"string"===typeof b&&(this.keep[c]=b)}this.item=a},b.Controller.prototype.failed=function(a){this.errormsg(a);this.invoking(!1);this.nowfocus(!1);this.haserror(!0);
console.log(a)},b.Controller.prototype.revert=function(){for(var a in this.keep)if("string"===typeof this.keep[a])this.item[a](this.keep[a]);this.errormsg("");this.invoking(!1);this.haserror(!1);this.updating(!1);this.nowfocus(!1)},b.Controller.prototype.update=function(){this.updating(!0);this.nowfocus(!0)},b.Controller.prototype.invoke=function(){this.invoking(!0)},b.as=function(a,c){var b=function(){a.apply(this,arguments);c.apply(this,arguments)};b.prototype=new a;return b.prototype.constructor=
b})})(ko);
