(function(b,h){"undefined"!==typeof b&&(b.model=function(a,c){function d(a,c){for(var e in a){var f=typeof a[e];if("string"===f||"number"===f||"boolean"===f)c[e]=b.observable(a[e]);else if("object"===f)if("undefined"===typeof a[e].length)c[e]=b.observable(d(a[e],{}));else{c[e]=b.observableArray();for(f=0;f<a[e].length;++f)c[e].push(d(a[e][f],{}))}}return c}return d(a,c||{})},b.bindingHandlers.using={init:function(a,c,d,h,g){g.outer=g.$parent;b.applyBindingsToDescendants(g.createChildContext(c()),
a);return{controlsDescendantBindings:!0}}},b.virtualElements.allowedBindings.using=!0,b.Controller=function(a){this.updating=b.observable(!1);this.nowfocus=b.observable(!1);this.invoking=b.observable(!1);this.haserror=b.observable(!1);this.errormsg=b.observable(!1);this.keep={};for(var c in a)if("function"===typeof a[c]&&"function"===typeof a[c].subscribe){var d=a[c]();"string"===typeof d&&(this.keep[c]=d)}!0===b.isObservable(a)?this.item=a():this.item=a},b.Controller.prototype.change=function(a){this.invoking(!1);
this.haserror(!1);this.nowfocus(!1);this.updating(!1);this.keep={};for(var b in a)if("function"===typeof a[b]&&"function"===typeof a[b].subscribe){var d=a[b]();"string"===typeof d&&(this.keep[b]=d)}this.item=a},b.Controller.prototype.failed=function(a){this.errormsg(a);this.invoking(!1);this.nowfocus(!1);this.haserror(!0);console.log(a)},b.Controller.prototype.revert=function(){for(var a in this.keep)if("string"===typeof this.keep[a])this.item[a](this.keep[a]);this.errormsg("");this.invoking(!1);
this.haserror(!1);this.updating(!1);this.nowfocus(!1)},b.Controller.prototype.update=function(){this.updating(!0);this.nowfocus(!0)},b.Controller.prototype.invoke=function(){this.invoking(!0)},b.as=function(a,b){var d=function(){a.apply(this,arguments);b.apply(this,arguments)};d.prototype=new a;return d.prototype.constructor=d})})(ko);
