(function(c,m){"undefined"!==typeof c&&(c.model=function(a,b){function f(a,b){for(var d in a){var e=typeof a[d];if("string"===e||"number"===e||"boolean"===e)b[d]=c.observable(a[d]);else if("object"===e)if("undefined"===typeof a[d].length)b[d]=c.observable(f(a[d],{}));else{b[d]=c.observableArray();for(e=0;e<a[d].length;++e)b[d].push(f(a[d][e],{}))}}return b}return f(a,b||{})},c.bindingHandlers.foreachAndModel={init:function(a,b,f,g,h){return c.bindingHandlers.foreach.init(a,b,f,g,h)},update:function(a,
b,f,g,h){var d=b();if("undefined"!==typeof d.data&&"undefined"!==typeof d.as&&"number"===typeof d.data.length){for(b=0;b<d.data.length;++b){var e={},k;for(k in g){var l=typeof g[k];if("function"===l||"object"===l||"string"===l||"number"===l)e[k]=g[k]}e[d.as]="undefined"!==typeof d.data[b][d.as]?d.data[b][d.as]:d.data[b];d.data[b]=e}d.as=m}return c.bindingHandlers.foreach.update(a,function(){return d},f,g,h)}},c.virtualElements.allowedBindings.foreachAndModel=!0,c.bindingHandlers.using={init:function(a,
b,f,g,h){b=b();if("object"!==typeof b||null===b)throw Error("using binding requires valid object");c.applyBindingsToDescendants(h.createChildContext(b),a);return{controlsDescendantBindings:!0}}},c.virtualElements.allowedBindings.using=!0,c.Controller=function(a){this.updating=c.observable(!1);this.nowfocus=c.observable(!1);this.invoking=c.observable(!1);this.haserror=c.observable(!1);this.errormsg=c.observable(!1);this.keep={};for(var b in a)if("function"===typeof a[b]&&"function"===typeof a[b].subscribe){var f=
a[b]();"string"===typeof f&&(this.keep[b]=f)}!0===c.isObservable(a)?this.item=a():this.item=a},c.Controller.prototype.change=function(a){this.invoking(!1);this.haserror(!1);this.nowfocus(!1);this.updating(!1);this.keep={};for(var b in a)if("function"===typeof a[b]&&"function"===typeof a[b].subscribe){var c=a[b]();"string"===typeof c&&(this.keep[b]=c)}this.item=a},c.Controller.prototype.failed=function(a){this.errormsg(a);this.invoking(!1);this.nowfocus(!1);this.haserror(!0);console.log(a)},c.Controller.prototype.revert=
function(){for(var a in this.keep)if("string"===typeof this.keep[a])this.item[a](this.keep[a]);this.errormsg("");this.invoking(!1);this.haserror(!1);this.updating(!1);this.nowfocus(!1)},c.Controller.prototype.update=function(){this.updating(!0);this.nowfocus(!0)},c.Controller.prototype.invoke=function(){this.invoking(!0)},c.as=function(a,b){var c=function(){a.apply(this,arguments);b.apply(this,arguments)};c.prototype=new a;return c.prototype.constructor=c})})(ko);
