(function(b,g){"undefined"!==typeof b&&(b.model=function(a,c){function f(a,c){for(var d in a){var e=typeof a[d];if("string"===e||"number"===e||"boolean"===e)c[d]=b.observable(a[d]);else if("object"===e)if("undefined"===typeof a[d].length)c[d]=b.observable(f(a[d],{}));else{c[d]=b.observableArray();for(e=0;e<a[d].length;++e)c[d].push(f(a[d][e],{}))}}return c}return f(a,c||{})},b.bindingHandlers.using={init:function(a,c,f,g,h){c=c();if("object"!==typeof c||null===c)throw Error("using binding requires valid object");
b.applyBindingsToDescendants(h.createChildContext(c),a);return{controlsDescendantBindings:!0}}},b.virtualElements.allowedBindings.using=!0,b.Controller=function(a){this.updating=b.observable(!1);this.nowfocus=b.observable(!1);this.invoking=b.observable(!1);this.haserror=b.observable(!1);this.errormsg=b.observable(!1);this.keep={};for(var c in a)if("function"===typeof a[c]&&"function"===typeof a[c].subscribe){var f=a[c]();"string"===typeof f&&(this.keep[c]=f)}this.item=a},b.Controller.prototype.change=
function(a){this.invoking(!1);this.haserror(!1);this.nowfocus(!1);this.updating(!1);this.keep={};for(var c in a)if("function"===typeof a[c]&&"function"===typeof a[c].subscribe){var b=a[c]();"string"===typeof b&&(this.keep[c]=b)}this.item=a},b.Controller.prototype.failed=function(a){this.errormsg(a);this.invoking(!1);this.nowfocus(!1);this.haserror(!0);console.log(a)},b.Controller.prototype.revert=function(){for(var a in this.keep)if("string"===typeof this.keep[a])this.item[a](this.keep[a]);this.errormsg("");
this.invoking(!1);this.haserror(!1);this.updating(!1);this.nowfocus(!1)},b.Controller.prototype.update=function(){this.updating(!0);this.nowfocus(!0)},b.Controller.prototype.invoke=function(){this.invoking(!0)},b.as=function(a,c){var b=function(){a.apply(this,arguments);c.apply(this,arguments)};b.prototype=new a;return b.prototype.constructor=b})})(ko);
